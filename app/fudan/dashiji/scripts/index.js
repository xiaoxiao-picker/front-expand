var px = new Array();
px[0] = new Array("1905", "震旦公学因外籍传教士南从周篡夺校政发生风潮，于右任、邵力子等原震旦公学学生脱离震旦，拥戴马相伯在吴淞创办复旦公学，马相伯、叶仲裕等邀请热心教育事业的严复、张謇、熊希龄等28人为校董，筹集复旦建校资金。两江总督周馥拨银1万两，并借吴淞提督衙门为临时校舍。当年民办官助的复旦公学正式开学。");
px[1] = new Array("1911", "辛亥革命爆发，复旦学生多数参加革命军；加上经费停发，学校本土又为光复军司令部占用，学校一度停办。", "./images/1911.jpeg");
px[2] = new Array("1913", "唐文治宣布学校改名为南洋大学堂，监督改称校长。此时期学校经费困难，唐文治提出自己减薪一半，师生同心，以维持教学。唐文治还著《人格》一书作为国文教材。此时期孙中山莅校演讲，全校师生共同致力于兴建中国实业。");
px[3] = new Array("1916", "培养大学预科毕业生十五人，中学毕业生一百五十人。其中著名的有张志让、孙越崎等人。", "./images/1916.png");
px[4] = new Array("1917", "复旦公学升格，改名为私立复旦大学，下设文、理、商三科以及预科和中学部，首任校长为李登辉。", "./images/1917.jpg");
px[5] = new Array("1929", "复旦大学进行系科改组，增设新闻系、市政系、法律系、教育系。", "./images/1929.jpeg");
px[6] = new Array("1937", "复旦大学发展为具有文、理、法、商四学院，十六系科的大学，还附设有中学、实验中学各一所，义务小学二所。复旦大学已成为中国东南的重要学府。抗日战争爆发后，复旦部分师生在吴南轩校长带领下，辗转内迁重庆北碚（渝校）。");
px[7] = new Array("1938", "复旦渝校陆续增设史地系、数理系、统计系、农垦专修科、园艺系、农场、茶叶组、农艺系等。", "./images/1938.jpeg");
px[8] = new Array("1940", "复旦渝校建立农学院。", "./images/1940.jpeg");
px[9] = new Array("1941", "经国民政府行政院批准，元旦复旦由私立改为国立，全称为国立复旦大学，章益出任校长。", "./images/1941.jpeg");
px[10] = new Array("1946", "学校迁回上海江湾原址，与沪校合并，学校的规模进一步扩大。");
px[11] = new Array("1947", "李登辉正式提议白玉兰为复旦校花。", "./images/1947.jpg");
px[12] = new Array("1949", "学校设立文、 理、法、商、农五院20多个系（科）。鲁迅、郭沫若、邹韬奋、老舍、竺可桢、马寅初等著名学者曾到校演讲或任教。6月，上海市军管会接管复旦。军管会任命张志让、陈望道担任校务委员会正副主任委员。");
px[13] = new Array("1950", "复旦大学的海洋系并入山东大学，暨南大学的文、法、商三院，同济大学的文、法两院，以及浙江大学、国立英士大学的部分系科并入复旦大学。");
px[14] = new Array("1952", "中共复旦大学委员会成立，李正文任书记。秋，复旦大学的法学院、商学院、农学院调出，分别成立了华东政法学院、上海财经学院和沈阳农学院（即沈阳农业大学）；而华东地区的浙江大学、交通大学、南京大学、安徽大学、金陵大学、圣约翰大学、沪江大学、震旦大学、（上海）大同大学、光华大学、大夏大学、上海学院、中华工商高等专科学校、中国新闻高等专科学校等高等院校的文、理科有关院系并入复旦大学，学校由应用学科见长的高校变为文理综合大学，在解放初期享有“江南第一学府”的美誉，奠定了后50年学科发展的基本格局和师资基础。");
px[15] = new Array("1954", "杨西光出任复旦大学党委书记。", "./images/1954.jpg");
px[16] = new Array("1956", "复旦第一次党代会召开。", "./images/1956.jpeg");
px[17] = new Array("1958", "“大跃进”，复旦大学理科新建了计算数学、力学、原子核物理、放射化学、无线电电子学、生物物理、生物化学等新专业。此前，文科重建了法律系、哲学系。这些新专业的创建，标志着复旦开始探索有自己特色的社会主义综合大学之路。");
px[18] = new Array("1959", "复旦大学被列为全国16所重点大学之一。", "./images/1959.jpeg");
px[19] = new Array("1976", "复旦大学成为“文革”的重灾区，教学科研受到重创。", "./images/1976.jpeg");
px[20] = new Array("1977", "复旦大学恢复招收本科生，次年恢复招收研究生。", "./images/1977.jpg");
px[21] = new Array("1978", "苏步青出任校长、党委委员，夏征农出任党委第一书记，进行了一系列拨乱反正工作，同时倡导民主办校，推动思想解放运动。", "./images/1978.jpg");
px[22] = new Array("1984", "复旦大学成立研究生院。同年，再次被国务院批准为国家重点建设的10所高校之一。", "./images/1984.jpeg");
px[23] = new Array("1993", "复旦大学提出了“追求优质，争创一流，明确复旦作为高校国家队的坐标位置”的发展大计，并逐步确立“建设世界一流大学”的总体奋斗目标。", "./images/1993.jpeg");
px[24] = new Array("1994", "复旦大学通过由国家教育部组织的“211工程”部门预审，提出了在21世纪初期，将复旦大学建设成为高层次人才培养、高水平科学研究、高科技成果转让和高规格决策咨询的中心和基地，成为学术思想活跃、学科特色鲜明、综合实力雄厚、精神面貌健康奋发、与上海国际化大都市地位相称的、具有世界一流水平的社会主义综合大学的总体奋斗目标，为此后十年制定了发展蓝图。");
px[25] = new Array("1995", "复旦大学90周年校庆，中共中央总书记江泽民为复旦大学题词：“面向新世纪，把复旦大学建设成为具有世界一流水平的社会主义综合性大学。", "./images/1995.jpeg");
px[26] = new Array("1999", "国家教育部、上海市政府签定共建复旦大学的协议，复旦成为“985工程”的首批建设高校。", "./images/1999.jpeg");
px[27] = new Array("2000", "上海医科大学与复旦大学合并，成立新的复旦大学。上海医科大学与复旦大学强强合并，进一步拓宽了复旦大学的学科结构，为建设国际一流的综合性大学的发展目标奠定了坚实的基础。", "./images/2000.jpeg");
px[28] = new Array("2005", "百年校庆，国家主席胡锦涛发来贺信，贺信中称复旦大学是“由中国人自主创办的第一所大学”。全国人大常委会委员长吴邦国参加校庆大会并致词。国家邮政总局发行复旦百年校庆纪念邮票，这是继北京大学百年校庆后中国第二次为一所大学百年校庆发行邮票。 ", "./images/2005.jpeg");
px[29] = new Array("2006", "“复旦”被评为上海市著名商标。", "./images/2007.jpeg");
px[30] = new Array("2007", "“复旦”商标（包括“复旦”二字和图形标识）被国家工商行政管理总局商标局认定为中国驰名商标（教育类），复旦因此成为继清华之后，中国第二所获此殊荣的高校。", "./images/2007.jpeg");

function randYears() {
    return parseInt((Math.random()) * 30);
}

var num = 0;
var result = 0;


$(document).ready(function() {


    var machine4 = $("#machine4").slotMachine({
        active: 0,
        delay: 500,
        randomize: function(activeElementIndex) {
            return Math.floor(result / 100);
        }
    });

    var machine5 = $("#machine5").slotMachine({
        active: 0,
        delay: 500,
        randomize: function(activeElementIndex) {
            return Math.floor(result % 100 / 10);
        }
    });

    window.machine6 = $("#machine6").slotMachine({
        active: 0,
        delay: 500,
        randomize: function(activeElementIndex) {
            return result % 10;
        }
    });

    // var startTime = "1430964293257";
    // var currenTime = new Date().getTime();

    // function getViewsAndShares() {
    //     var interval = (currenTime - startTime)/1000;
    //     $("#Views").text("参与人数：" + parseInt((interval / 60 + 1) * 2));
    //     $("#Shares").text("分享人数：" + parseInt(interval / 80 + 2));
    // }
    // getViewsAndShares();


    //touch.js

    var started = false;
    var over = false;

    touch.on('.year-box', 'swipe', function() {
        num = randYears();
        spanYear = parseInt(px[num][0]); //年份
        result = spanYear - 1905; //岁数

        if (started == false) {
            started = true;
            machine4.shuffle();
            setTimeout(
                function() {
                    machine5.shuffle();
                    setTimeout(function() {
                        machine6.shuffle()
                    }, 179);
                }, 136);

        }

        // setTimeout(startSlot,500);
        setTimeout(function() {
            if (started == true) {
                machine4.stop();
                machine5.stop();
                machine6.stop();
                started = false;
                over = true;
                setTimeout(function() {
                    //spanYear
                    document.getElementById("spanYear").innerHTML = spanYear;
                    document.getElementById("spanContent").innerHTML = px[num][1];

                    if (!px[num][2])
                        document.getElementById("imgContent").style.display = "none";
                    else {
                        document.getElementById("imgContent").style.display = "block";
                        document.getElementById("imgContent").src = px[num][2];
                    }

                    touch.on('.line', 'tap', function() { //点击之后出现蜡烛页面
                        window.location.href = "lazhu.html";
                    });
                }, 1500);
            }
        }, 3000);
    });



});